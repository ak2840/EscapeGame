# 焦土中的信號 Signal

> 一個刺激的2.5D網頁生存冒險遊戲，在末日廢墟中尋找希望的生存挑戰

[![Game Preview](https://img.shields.io/badge/Game-2.5D%20Survival-blue)](https://github.com/your-repo)
[![Technology](https://img.shields.io/badge/Tech-HTML5%20Canvas-green)](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
[![Language](https://img.shields.io/badge/Language-JavaScript-yellow)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)

## 📖 專案概述

《焦土中的信號 Signal》是一款基於HTML5 Canvas開發的2.5D生存冒險遊戲。玩家將扮演一名在末日廢墟中尋找希望的倖存者，通過收集道具、躲避怪物、尋找出口來完成生存挑戰。

### 🎯 遊戲理念
- **生存挑戰**：在有限的時間內完成任務
- **策略思考**：利用安全區域和遠程攻擊制定戰術
- **探索冒險**：在廣闊的地圖中尋找關鍵道具
- **成就系統**：記錄擊殺數量和通關時間

## 🎮 遊戲特色

### 核心玩法
- **多關卡系統**：4個不同難度的關卡，逐步解鎖
- **安全區域系統**：4x4格的安全起始區域，怪物無法進入
- **遠距離攻擊**：300像素攻擊範圍，每0.3秒自動攻擊
- **三種怪物類型**：
  - 🟠 普通怪物：隨機移動
  - 🟣 追蹤怪物：會追擊玩家
  - 🔴 砲塔怪物：遠程攻擊
- **擊殺計數系統**：記錄消滅的怪物數量

### 進階功能
- **音效系統**：完整的背景音樂和音效，可獨立控制
- **粒子效果**：攻擊、擊中、爆炸等視覺特效
- **遊戲統計**：詳細的遊戲數據追蹤
- **進度保存**：自動保存關卡進度到Cookie
- **道具系統**：四種不同道具，地圖掉落和怪物掉落
- **通關條件**：必須收集足夠道具才能通關
- **Debug功能**：開發者一鍵全通關功能

## 🎯 操作方式

| 按鍵 | 功能 |
|------|------|
| 方向鍵 | 移動角色 |
| 空白鍵 | 執行動作（打招呼/通關） |
| ESC | 回到遊戲大廳 |
| 音效按鈕 | 控制背景音樂和音效開關 |
| 重置按鈕 | 重置所有通關進度 |
| Debug按鈕 | 一鍵全通關（開發用） |

## 🏆 遊戲目標

每個關卡都有不同的通關條件：

### 🎯 第1關：新手關卡
- **過關條件**：收集 **1個 OPEE**（地圖道具）
- **地圖道具**：1個 OPEE
- **怪物**：無
- **難度**：⭐（最簡單）

### 🎯 第2關：追蹤者挑戰
- **過關條件**：收集 **10個 綠能聚合晶體**（怪物掉落）
- **地圖道具**：無
- **怪物**：60個追蹤者（trackerA: 30個 + trackerB: 30個）
- **掉落率**：追蹤者 100% 機率掉落綠能聚合晶體
- **難度**：⭐⭐⭐

### 🎯 第3關：混戰關卡
- **過關條件**：同時收集
  - **10個 共感頻率器**（地圖道具）
  - **5個 綠能聚合晶體**（怪物掉落）
- **地圖道具**：20個共感頻率器
- **怪物**：55個（普通怪物45個 + 追蹤者20個）
- **掉落率**：
  - 普通怪物：0% 機率掉落
  - 追蹤者：100% 機率掉落綠能聚合晶體
- **難度**：⭐⭐⭐⭐

### 🎯 第4關：最終挑戰
- **過關條件**：收集 **1個 綠能聚合晶體**（怪物掉落）
- **地圖道具**：20個共感頻率器（但不需要收集）
- **怪物**：1個砲塔
- **掉落率**：砲塔 0% 機率掉落綠能聚合晶體
- **難度**：⭐⭐⭐⭐⭐（最困難）

在時間限制內找到地圖中心的出口並按空白鍵通關！

## 🎨 視覺特色

### 遊戲元素
- **2.5D視角**：使用HTML5 Canvas繪製
- **精美地圖**：每個關卡都有獨特的地圖瓦片
- **網格系統**：100像素間距的網格線幫助定位
- **安全區域**：淡藍色邊框標示4x4安全區域

### 怪物設計
- 🟠 **普通怪物**：隨機移動，血量較高
- 🟣 **追蹤怪物**：會追擊玩家，移動速度快
- 🔴 **砲塔怪物**：遠程攻擊，血量最高

### 道具系統
- 🔴 **OPEE**：地圖道具，第一關出現
- 🟢 **共感頻率器**：地圖道具，第三關出現
- 🟠 **綠能聚合晶體**：怪物掉落，追蹤怪物掉落
- 🔵 **動能核心**：怪物掉落，砲塔怪物掉落

### 怪物掉落機制
- **普通怪物**（normalA、normalB、normalC）：0% 機率掉落
- **追蹤怪物**（trackerA、trackerB）：100% 機率掉落綠能聚合晶體
- **砲塔怪物**（turret）：100% 機率掉落動能核心

### 視覺效果
- **攻擊特效**：黃色小圓點彈幕
- **粒子效果**：攻擊軌跡、擊中爆炸、受傷特效
- **計時器**：右上角顯示剩餘時間，低於5秒變黃色，低於3秒變紅色
- **出口狀態**：綠色表示可通關，紅色表示條件未滿足

## 🚀 快速開始

### 環境要求
- 現代瀏覽器（Chrome、Firefox、Safari、Edge）
- 支援HTML5 Canvas和Audio API
- 建議螢幕解析度：1024x768或更高

### 安裝運行

#### 方法一：直接開啟
```bash
# 下載專案後直接開啟index.html
open index.html
```

#### 方法二：本地伺服器（推薦）
```bash
# 使用提供的腳本（macOS）
./Run.command

# 或手動啟動Python伺服器
python3 -m http.server 8000
# 然後開啟 http://localhost:8000
```

#### 方法三：使用其他伺服器
```bash
# Node.js
npx http-server

# PHP
php -S localhost:8000

# Python 2
python -m SimpleHTTPServer 8000
```

## 🏗️ 技術架構

### 技術棧
- **前端**：純HTML5 Canvas
- **語言**：JavaScript (ES6+)
- **渲染**：requestAnimationFrame
- **碰撞檢測**：矩形碰撞檢測
- **路徑計算**：歐幾里得距離算法
- **音效系統**：HTML5 Audio API
- **粒子系統**：自定義粒子引擎
- **數據存儲**：Cookie-based進度保存

### 核心模組
```
main.js (3989行)
├── 遊戲初始化 (initGame)
├── 遊戲循環 (gameLoop)
├── 玩家系統 (updatePlayer, drawPlayer)
├── 怪物系統 (spawnMonsters, updateMonsters)
├── 攻擊系統 (autoAttack, updateProjectiles)
├── 道具系統 (spawnMapItems, checkItemCollection)
├── 音效系統 (audioSystem)
├── 粒子系統 (particleSystem)
├── UI系統 (drawGameUI, drawSoundControls)
└── 進度管理 (saveProgress, loadLevel)
```

### 檔案結構
```
EscapeGame/
├── index.html              # 主頁面
├── main.js                 # 遊戲核心邏輯
├── gameConfig.js           # 遊戲配置
├── README.md              # 專案說明
├── Run.command            # 快速啟動腳本
└── assets/                # 資源檔案
    ├── audio/             # 音效檔案
    ├── maps/              # 地圖圖片
    ├── monsters/          # 怪物圖片
    ├── items/             # 道具圖片
    ├── player/            # 玩家圖片
    └── ui/                # UI元件
```

## ⚙️ 配置系統

### 遊戲配置
遊戲使用JavaScript格式的配置檔案（`gameConfig.js`），支援：
- **動態關卡設定**：地圖大小、怪物數量、遊戲時間
- **權重系統**：控制地圖圖片出現機率
- **道具配置**：道具類型、顏色、大小
- **怪物屬性**：血量、速度、攻擊模式、掉落率

### 怪物掉落系統
- 每種怪物都有獨立的掉落率設定
- 支援同時掉落多種道具
- 掉落率由怪物本身決定，不依賴關卡設定

## 🎯 遊戲策略

### 初學者策略
1. 在安全區域內觀察怪物分布
2. 利用遠距離攻擊消滅追蹤怪物
3. 避開怪物密集區域
4. 快速尋找地圖邊緣的綠色出口

### 進階策略
1. 優先消滅追蹤怪物
2. 利用安全區域作為避難所
3. 規劃最佳路徑到出口
4. 在時間緊迫時冒險衝刺

### 關卡特定策略

#### 第1關：新手關卡
- 直接收集地圖上的OPEE道具
- 無怪物威脅，專注於熟悉操作

#### 第2關：追蹤者挑戰
- 專注於消滅追蹤者獲得綠能聚合晶體
- 利用安全區域躲避追擊
- 需要擊殺至少10個追蹤者

#### 第3關：混戰關卡
- 平衡收集地圖道具和擊殺追蹤者
- 優先收集共感頻率器（地圖道具）
- 擊殺追蹤者獲得綠能聚合晶體
- 注意普通怪物不會掉落道具

#### 第4關：最終挑戰
- 專注於擊殺砲塔獲得動能核心
- 砲塔血量高，需要耐心攻擊
- 注意砲塔的遠程攻擊

## 🏁 勝利與失敗

### 勝利條件
- 收集關卡要求的道具數量
- 在時間限制內找到地圖中心的出口
- 站在出口上按空白鍵

### 失敗條件
- 被怪物觸碰到
- 時間到未通關

## 📊 遊戲統計

- **擊殺計數**：右上角顯示消滅的怪物數量
- **時間顯示**：實時倒數計時
- **通關記錄**：自動保存到Cookie
- **Console記錄**：詳細的遊戲事件記錄

## 🛠️ 開發指南

### 添加新功能
1. 在 `main.js` 中找到對應的模組
2. 遵循現有的程式碼風格
3. 添加必要的錯誤處理
4. 更新相關文檔

### 修改遊戲平衡
1. 編輯 `gameConfig.js`
2. 調整怪物數量、血量、速度
3. 修改遊戲時間和道具要求
4. 調整怪物掉落率
5. 測試遊戲平衡性

### 添加新關卡
1. 在 `gameConfig.js` 中添加新關卡配置
2. 準備對應的地圖圖片
3. 設定怪物分布和道具要求
4. 更新 `maxLevel` 值

### Debug功能
- **Debug按鈕**：一鍵全通關，方便測試
- **Console命令**：提供多個調試函數
- **權重統計**：分析地圖圖片分布

## 🎮 遊戲體驗

### 緊張刺激
- 時間限制增加緊迫感
- 追蹤怪物帶來持續威脅
- 倒數計時顏色變化提醒時間緊迫

### 策略性
- 安全區域提供戰術選擇
- 遠距離攻擊需要精準判斷
- 路徑規劃影響通關效率

### 成就感
- 擊殺計數器記錄表現
- 快速通關挑戰
- 高擊殺數成就

## 🔧 開發特色

- **模組化設計**：功能分離，易於維護
- **效能優化**：只渲染可視範圍內的物件
- **響應式設計**：適應不同螢幕尺寸
- **錯誤處理**：穩定的遊戲運行
- **配置驅動**：JSON配置檔案易於調整
- **權重系統**：靈活的地圖生成控制

## 📝 更新日誌

### v1.0.0
- 完成4個關卡的基礎遊戲
- 實現音效系統和粒子效果
- 添加道具收集系統
- 實現進度保存功能
- 添加Debug開發工具

## 🤝 貢獻指南

歡迎提交Issue和Pull Request！

### 開發環境
1. Fork專案
2. 創建功能分支
3. 提交變更
4. 發起Pull Request

### 代碼規範
- 使用有意義的變數名稱
- 添加必要的註釋
- 遵循現有的程式碼風格
- 確保功能正常運行

## 📄 授權

本專案採用 MIT 授權條款 - 詳見 [LICENSE](LICENSE) 檔案

## 🙏 致謝

- HTML5 Canvas API
- 所有提供音效和圖片的資源
- 測試和反饋的玩家們

---

**享受這個刺激的逃脫挑戰吧！** 🎮✨

> 在廢墟中尋找希望的生存冒險，每一關都是新的挑戰！ 
