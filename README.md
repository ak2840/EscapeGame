# 焦土中的信號 Signal

> 一個刺激的2.5D網頁生存冒險遊戲，在末日廢墟中尋找希望的生存挑戰

[![Game Preview](https://img.shields.io/badge/Game-2.5D%20Survival-blue)](https://github.com/your-repo)
[![Technology](https://img.shields.io/badge/Tech-HTML5%20Canvas-green)](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
[![Language](https://img.shields.io/badge/Language-JavaScript-yellow)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![License](https://img.shields.io/badge/License-MIT-red)](LICENSE)

## 📋 目錄

- [🎮 遊戲概述](#-遊戲概述)
- [🚀 快速開始](#-快速開始)
- [🎯 遊戲特色](#-遊戲特色)
- [🎮 操作指南](#-操作指南)
- [🏆 關卡系統](#-關卡系統)
- [🎨 視覺設計](#-視覺設計)
- [🏗️ 技術架構](#️-技術架構)
- [📁 專案結構](#-專案結構)
- [⚙️ 配置系統](#️-配置系統)
- [🛠️ 開發指南](#️-開發指南)
- [📊 遊戲統計](#-遊戲統計)
- [🎯 遊戲策略](#-遊戲策略)
- [📝 更新日誌](#-更新日誌)
- [🤝 貢獻指南](#-貢獻指南)

## 🎮 遊戲概述

《焦土中的信號 Signal》是一款基於HTML5 Canvas開發的2.5D生存冒險遊戲。玩家將扮演一名在末日廢墟中尋找希望的倖存者，通過收集道具、躲避怪物、尋找出口來完成生存挑戰。

### 🎯 核心玩法
- **生存挑戰**：在有限的時間內完成任務
- **策略思考**：利用安全區域和遠程攻擊制定戰術
- **探索冒險**：在廣闊的地圖中尋找關鍵道具
- **成就系統**：記錄擊殺數量和通關時間

### 🌟 遊戲亮點
- **多關卡系統**：4個不同難度的關卡，逐步解鎖
- **安全區域系統**：4x4格的安全起始區域，怪物無法進入
- **遠距離攻擊**：300像素攻擊範圍，每0.3秒自動攻擊
- **三種怪物類型**：普通怪物、追蹤怪物、砲塔怪物
- **道具收集系統**：四種不同道具，地圖掉落和怪物掉落
- **音效系統**：完整的背景音樂和音效，可獨立控制
- **粒子效果**：攻擊、擊中、爆炸等視覺特效
- **進度保存**：自動保存關卡進度到Cookie
- **流量節省**：手機設備自動跳過影片載入，節省流量

## 🚀 快速開始

### 環境要求
- 現代瀏覽器（Chrome、Firefox、Safari、Edge）
- 支援HTML5 Canvas和Audio API
- 建議螢幕解析度：1024x768或更高

### 安裝運行

#### 方法一：直接開啟（最簡單）
```bash
# 下載專案後直接開啟index.html
open index.html
```

#### 方法二：本地伺服器（推薦）
```bash
# 使用提供的腳本（macOS）
./Run.command

# 或手動啟動Python伺服器
python3 -m http.server 8001
# 然後開啟 http://localhost:8001
```

#### 方法三：使用其他伺服器
```bash
# Node.js
npx http-server

# PHP
php -S localhost:8000

# Python 2
python -m SimpleHTTPServer 8000
```

## 🎯 遊戲特色

### 核心機制

#### 🛡️ 安全區域系統
- **4x4格安全區域**：怪物無法進入的安全起始區域
- **淡藍色邊框**：清楚標示安全區域範圍
- **戰術避難所**：可作為躲避追蹤怪物的避難所

#### ⚔️ 攻擊系統
- **自動攻擊**：停止移動時自動攻擊
- **遠程攻擊**：300像素攻擊範圍
- **攻擊冷卻**：每0.3秒一次攻擊
- **彈幕系統**：黃色小圓點彈幕視覺效果

#### 🎯 怪物系統
| 怪物類型 | 血量 | 速度 | 攻擊模式 | 掉落道具 | 掉落率 |
|---------|------|------|----------|----------|--------|
| 🟠 普通怪物 | 5 | 0.8 | 隨機移動 | 無 | 0% |
| 🟣 追蹤怪物 | 2 | 1.5 | 追擊玩家 | 綠能聚合晶體 | 100% |
| 🔴 砲塔怪物 | 30 | 0 | 遠程攻擊 | 動能核心 | 100% |

#### 🎁 道具系統
| 道具名稱 | 類型 | 顏色 | 大小 | 來源 |
|---------|------|------|------|------|
| 🔴 OPEE | 地圖道具 | 紅色 | 80px | 地圖掉落 |
| 🟢 共感頻率器 | 地圖道具 | 綠色 | 50px | 地圖掉落 |
| 🟠 綠能聚合晶體 | 怪物掉落 | 橙色 | 35px | 追蹤怪物 |
| 🔵 動能核心 | 怪物掉落 | 藍色 | 45px | 砲塔怪物 |

### 進階功能

#### 🎵 音效系統
- **背景音樂**：可獨立控制開關和音量
- **音效控制**：攻擊、擊中、按鈕等音效
- **音量記憶**：自動保存音效設定

#### ✨ 視覺效果
- **粒子系統**：攻擊軌跡、擊中爆炸、受傷特效
- **動畫系統**：怪物移動動畫、玩家動作動畫
- **UI特效**：按鈕懸停、計時器顏色變化

#### 📊 統計系統
- **擊殺計數**：實時顯示消滅的怪物數量
- **時間顯示**：倒數計時，低於5秒變黃色，低於3秒變紅色
- **進度保存**：自動保存到Cookie，支援多瀏覽器

## 🎮 操作指南

### 基本操作
| 按鍵 | 功能 | 說明 |
|------|------|------|
| 方向鍵 | 移動角色 | 上下左右移動 |
| 空白鍵 | 執行動作 | 打招呼/通關 |
| ESC | 回到大廳 | 返回遊戲大廳 |

### 大廳控制
| 按鈕 | 功能 | 說明 |
|------|------|------|
| 🎵 音量按鈕 | 控制背景音樂 | 開啟/關閉背景音樂 |
| 🔊 音效按鈕 | 控制音效 | 開啟/關閉遊戲音效 |
| 🔄 重置按鈕 | 重置進度 | 清除所有通關記錄 |
| ❓ 關於按鈕 | 查看資訊 | 製作團隊和美術圖 |

### 手機控制
- **虛擬搖桿**：觸控移動角色
- **動作按鈕**：觸控執行動作
- **Debug按鈕**：一鍵全通關（開發用）

## 🏆 關卡系統

### 🎯 第1關：新手關卡
- **過關條件**：收集 **1個 OPEE**（地圖道具）
- **地圖道具**：1個 OPEE
- **怪物**：無
- **遊戲時間**：10秒
- **難度**：⭐（最簡單）
- **解鎖條件**：無

### 🎯 第2關：追蹤者挑戰
- **過關條件**：收集 **10個 綠能聚合晶體**（怪物掉落）
- **地圖道具**：無
- **怪物**：60個追蹤者（trackerA: 30個 + trackerB: 30個）
- **遊戲時間**：100秒
- **難度**：⭐⭐⭐
- **解鎖條件**：通關第1關

### 🎯 第3關：混戰關卡
- **過關條件**：同時收集
  - **10個 共感頻率器**（地圖道具）
  - **5個 綠能聚合晶體**（怪物掉落）
- **地圖道具**：20個共感頻率器
- **怪物**：55個（普通怪物45個 + 追蹤者20個）
- **遊戲時間**：100秒
- **難度**：⭐⭐⭐⭐
- **解鎖條件**：通關第2關

### 🎯 第4關：最終挑戰
- **過關條件**：收集 **1個 動能核心**（怪物掉落）
- **地圖道具**：20個共感頻率器（但不需要收集）
- **怪物**：1個砲塔
- **遊戲時間**：100秒
- **難度**：⭐⭐⭐⭐⭐（最困難）
- **解鎖條件**：通關第3關

## 🎨 視覺設計

### 遊戲元素
- **2.5D視角**：使用HTML5 Canvas繪製
- **精美地圖**：每個關卡都有獨特的地圖瓦片
- **網格系統**：100像素間距的網格線幫助定位
- **安全區域**：淡藍色邊框標示4x4安全區域

### 視覺效果
- **攻擊特效**：黃色小圓點彈幕
- **粒子效果**：攻擊軌跡、擊中爆炸、受傷特效
- **計時器**：右上角顯示剩餘時間，低於5秒變黃色，低於3秒變紅色
- **出口狀態**：綠色表示可通關，紅色表示條件未滿足

### 響應式設計
- **桌面版**：完整功能，最佳體驗
- **手機版**：虛擬搖桿控制，觸控優化
- **平板版**：自適應佈局，觸控支援

## 🏗️ 技術架構

### 技術棧
- **前端**：純HTML5 Canvas
- **語言**：JavaScript (ES6+)
- **渲染**：requestAnimationFrame
- **碰撞檢測**：矩形碰撞檢測
- **路徑計算**：歐幾里得距離算法
- **音效系統**：HTML5 Audio API
- **粒子系統**：自定義粒子引擎
- **數據存儲**：Cookie-based進度保存

### 核心模組
```
main.js (4966行)
├── 遊戲初始化 (initGame)
├── 遊戲循環 (gameLoop)
├── 玩家系統 (updatePlayer, drawPlayer)
├── 怪物系統 (spawnMonsters, updateMonsters)
├── 攻擊系統 (autoAttack, updateProjectiles)
├── 道具系統 (spawnMapItems, checkItemCollection)
├── 音效系統 (audioSystem)
├── 粒子系統 (particleSystem)
├── UI系統 (drawGameUI, drawSoundControls)
├── 關於系統 (aboutSystem)
└── 進度管理 (saveProgress, loadLevel)
```

### 性能優化
- **視錐剔除**：只渲染可視範圍內的物件
- **圖片預載入**：遊戲開始前預載入所有圖片
- **事件委託**：使用事件委託處理點擊事件
- **記憶體管理**：及時清理不需要的物件

## 📁 專案結構

```
EscapeGame/
├── index.html                    # 主頁面
├── main.js                       # 遊戲核心邏輯 (4966行)
├── gameConfig.js                 # 遊戲配置 (270行)
├── README.md                     # 專案說明
├── Run.command                   # 快速啟動腳本 (macOS)
├── .gitignore                    # Git忽略檔案
└── assets/                       # 資源檔案
    ├── assets-list.txt           # 完整資源清單 (294行)
    ├── audio/                    # 音效檔案 (4個)
    │   ├── background-music.mp3  # 背景音樂
    │   ├── attack.mp3           # 攻擊音效
    │   ├── hit.mp3              # 命中音效
    │   └── button-click.mp3     # 按鈕點擊音效
    ├── maps/                     # 地圖圖片 (24張)
    │   ├── map-level1-*.png     # 第1關地圖 (6張)
    │   ├── map-level2-*.png     # 第2關地圖 (6張)
    │   ├── map-level3-*.png     # 第3關地圖 (6張)
    │   └── map-level4-*.png     # 第4關地圖 (6張)
    ├── monsters/                 # 怪物圖片 (29張)
    │   ├── normalA-*.png        # 普通怪物A (4張)
    │   ├── normalB-*.png        # 普通怪物B (4張)
    │   ├── normalC-*.png        # 普通怪物C (4張)
    │   ├── trackerA-*.png       # 追蹤怪物A (4張)
    │   ├── trackerB-*.png       # 追蹤怪物B (4張)
    │   ├── turret-*.png         # 砲塔怪物 (5張)
    │   └── turret-monster.png   # 砲塔靜態圖片 (1張)
    ├── items/                    # 道具圖片 (4張)
    │   ├── item-map-*.png       # 地圖道具 (2張)
    │   └── item-monster-*.png   # 怪物掉落道具 (2張)
    ├── player/                   # 玩家圖片 (24張)
    │   ├── player-*-1.png       # 各種動作第1幀 (12張)
    │   └── player-*-2.png       # 各種動作第2幀 (12張)
    ├── exit/                     # 出口圖片 (4張)
    │   └── exit_level*.png      # 各關卡出口
    ├── story/                    # 劇情圖片 (8張)
    │   ├── story_*_before.jpg   # 關卡開始劇情 (4張)
    │   └── story_*_after.jpg    # 關卡結束劇情 (4張)
    └── ui/                       # UI元件 (8張)
        ├── lobby-background.png # 大廳背景
        └── *.svg                # UI圖示 (7張)
```

### 相關文檔
- `ABOUT_PAGE_README.md` - 關於頁面功能說明
- `MOBILE_CONTROLS_README.md` - 手機控制技術實現詳解
- `STORY_SYSTEM_README.md` - 劇情系統技術實現詳解
- `WEIGHT_SYSTEM_README.md` - 權重系統算法詳解
- `MOBILE_DATA_SAVING_README.md` - 手機流量節省功能詳解

## ⚙️ 配置系統

### 遊戲配置
遊戲使用JavaScript格式的配置檔案（`gameConfig.js`），支援：

#### 關卡配置
```javascript
levels: {
  1: {
    name: "新手關卡",
    mapWidth: 1200,
    mapHeight: 1000,
    normalAMonsters: 0,
    trackerAMonsters: 0,
    gameTime: 10000,
    exitCondition: {
      mapItemA: 1
    }
  }
}
```

#### 怪物配置
```javascript
monsterSettings: {
  turret: {
    hp: 30,
    speed: 0,
    color: "#8B0000",
    attackCooldown: 500,
    attackRange: 250,
    size: 300,
    dropItemA: 0.0,
    dropItemB: 1.0
  }
}
```

#### 道具配置
```javascript
itemSettings: {
  mapItemA: {
    name: "OPEE",
    description: "一個機器人",
    color: "#FF4444",
    size: 80,
    image: "assets/items/item-map-a.png"
  }
}
```

### 權重系統
- **地圖圖片權重**：控制地圖瓦片出現機率
- **怪物掉落權重**：控制道具掉落機率
- **動態調整**：可根據關卡難度調整權重

## 🛠️ 開發指南

### 添加新功能
1. 在 `main.js` 中找到對應的模組
2. 遵循現有的程式碼風格
3. 添加必要的錯誤處理
4. 更新相關文檔

### 修改遊戲平衡
1. 編輯 `gameConfig.js`
2. 調整怪物數量、血量、速度
3. 修改遊戲時間和道具要求
4. 調整怪物掉落率
5. 測試遊戲平衡性

### 添加新關卡
1. 在 `gameConfig.js` 中添加新關卡配置
2. 準備對應的地圖圖片
3. 設定怪物分布和道具要求
4. 更新 `maxLevel` 值

### Debug功能
- **手機Debug按鈕**：一鍵全通關，方便測試
- **Console命令**：提供多個調試函數
- **權重統計**：分析地圖圖片分布

## 📊 遊戲統計

### 即時統計
- **擊殺計數**：右上角顯示消滅的怪物數量
- **時間顯示**：實時倒數計時
- **道具統計**：顯示已收集的道具數量
- **通關狀態**：顯示是否滿足通關條件

### 持久化數據
- **通關記錄**：自動保存到Cookie
- **音效設定**：記住音量偏好
- **進度追蹤**：記錄最高通關關卡

### 開發統計
- **Console記錄**：詳細的遊戲事件記錄
- **效能監控**：FPS和記憶體使用情況
- **錯誤追蹤**：自動記錄錯誤信息

## 🎯 遊戲策略

### 初學者策略
1. **熟悉操作**：在安全區域內練習移動和攻擊
2. **觀察環境**：了解怪物分布和道具位置
3. **利用安全區域**：作為避難所和戰術基地
4. **遠程攻擊**：利用300像素攻擊範圍消滅怪物

### 進階策略
1. **優先目標**：優先消滅追蹤怪物獲得道具
2. **路徑規劃**：規劃最佳路徑到出口
3. **時間管理**：合理分配收集道具和尋找出口的時間
4. **風險評估**：在時間緊迫時冒險衝刺

### 關卡特定策略

#### 第1關：新手關卡
- 直接收集地圖上的OPEE道具
- 無怪物威脅，專注於熟悉操作
- 利用10秒時間熟悉遊戲機制

#### 第2關：追蹤者挑戰
- 專注於消滅追蹤者獲得綠能聚合晶體
- 利用安全區域躲避追擊
- 需要擊殺至少10個追蹤者
- 注意追蹤者移動速度快

#### 第3關：混戰關卡
- 平衡收集地圖道具和擊殺追蹤者
- 優先收集共感頻率器（地圖道具）
- 擊殺追蹤者獲得綠能聚合晶體
- 注意普通怪物不會掉落道具

#### 第4關：最終挑戰
- 專注於擊殺砲塔獲得動能核心
- 砲塔血量高（30點），需要耐心攻擊
- 注意砲塔的遠程攻擊
- 利用安全區域躲避砲塔攻擊

## 📝 更新日誌

### v1.0.0 (最新版本)
- ✅ 完成4個關卡的基礎遊戲
- ✅ 實現音效系統和粒子效果
- ✅ 添加道具收集系統
- ✅ 實現進度保存功能
- ✅ 添加Debug開發工具
- ✅ 實現關於頁面功能
- ✅ 添加手機控制支援
- ✅ 實現劇情系統
- ✅ 添加權重系統
- ✅ 完善配置系統

### 技術改進
- 優化遊戲性能
- 改善碰撞檢測
- 增強視覺效果
- 完善錯誤處理
- 提升用戶體驗

## 📚 技術文檔

為了提供更詳細的技術實現說明，我們提供了以下專門的技術文檔：

### 🔧 詳細技術實現
- **[手機控制系統](MOBILE_CONTROLS_README.md)** - 手機觸控技術實現、響應式設計、故障排除
- **[劇情系統](STORY_SYSTEM_README.md)** - 劇情圖片載入、預設圖片生成、狀態管理
- **[權重系統](WEIGHT_SYSTEM_README.md)** - 權重算法、隨機種子、調試功能
- **[關於頁面](ABOUT_PAGE_README.md)** - 模態視窗、美術圖列表、進度控制
- **[流量節省功能](MOBILE_DATA_SAVING_README.md)** - 手機設備檢測、影片載入優化、流量節省策略

### 🎯 適用對象
- **開發者**：需要了解技術實現細節
- **維護者**：需要修改或擴展功能
- **學習者**：想要學習HTML5 Canvas遊戲開發

## 🤝 貢獻指南

歡迎提交Issue和Pull Request！

### 開發環境
1. Fork專案
2. 創建功能分支
3. 提交變更
4. 發起Pull Request

### 代碼規範
- 使用有意義的變數名稱
- 添加必要的註釋
- 遵循現有的程式碼風格
- 確保功能正常運行

### 測試要求
- 在Chrome、Firefox、Safari中測試
- 在手機設備上測試
- 確保音效功能正常
- 驗證進度保存功能

## 📄 授權

本專案採用 MIT 授權條款 - 詳見 [LICENSE](LICENSE) 檔案

## 🙏 致謝

- HTML5 Canvas API
- 所有提供音效和圖片的資源
- 測試和反饋的玩家們
- 開源社群的支持

---

**享受這個刺激的逃脫挑戰吧！** 🎮✨

> 在廢墟中尋找希望的生存冒險，每一關都是新的挑戰！

---

<div align="center">

**⭐ 如果這個專案對您有幫助，請給我們一個星標！**

</div> 
