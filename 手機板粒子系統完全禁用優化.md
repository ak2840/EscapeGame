# 手機板粒子系統完全禁用優化

## 問題描述
用戶反映手機板在射擊時仍然有卡頓問題，即使已經關閉了粒子系統。

## 根本原因分析
雖然粒子系統的 `addParticle()`、`update()` 和 `draw()` 方法已經有 `mobileDisabled` 檢查，但是所有 `particleSystem.create*()` 方法的調用仍然會執行，只是不會添加粒子。這些調用本身仍然會消耗性能。

## 優化措施

### 1. 粒子系統核心優化
- **移動設備檢測**: `isMobileDevice()` 函數檢測手機設備
- **粒子系統禁用標誌**: `particleSystem.mobileDisabled` 屬性
- **完全禁用機制**: 
  - `addParticle()`: 如果 `mobileDisabled` 為 true，直接返回
  - `update()`: 如果 `mobileDisabled` 為 true，直接返回  
  - `draw()`: 如果 `mobileDisabled` 為 true，直接返回

### 2. 粒子創建調用優化
在所有調用 `particleSystem.create*()` 方法的地方添加手機設備檢查：

```javascript
// 優化前
particleSystem.createHitEffect(x, y, "#b13435");

// 優化後
if (!isMobileDevice()) {
  particleSystem.createHitEffect(x, y, "#b13435");
}
```

### 3. 優化的粒子創建調用位置
- **玩家受傷效果**: `checkCollision()` 函數中
- **出口爆炸效果**: `checkExit()` 函數中
- **怪物命中效果**: `updateProjectiles()` 函數中
- **怪物死亡爆炸**: `updateProjectiles()` 函數中
- **玩家受傷效果**: `updateMonsterProjectiles()` 函數中
- **攻擊爆炸效果**: `executeDebugFunction()` 函數中
- **冰凍爆炸效果**: `createDeathExplosionAttack()` 函數中
- **道具收集效果**: `checkItemCollection()` 函數中
- **攻擊軌跡效果**: `autoAttack()` 函數中

### 4. 其他性能優化
- **攻擊冷卻優化**: 手機設備攻擊冷卻時間增加50%
- **碰撞檢測優化**: 手機設備每3幀檢查一次碰撞
- **彈幕更新優化**: 手機設備每2幀更新一次彈幕
- **怪物更新優化**: 手機設備每2幀更新一次怪物
- **移動控制優化**: 手機設備按鈕事件添加防抖處理

## 效果
- **手機設備**: 所有粒子效果完全不會產生、更新或繪製，大幅減少CPU負載
- **桌面設備**: 粒子系統正常運作，保持視覺效果
- **性能提升**: 手機板射擊時不會有任何粒子相關的計算

## 測試建議
請在手機設備上測試遊戲，特別注意：
1. 射擊時的流暢度
2. 攻擊怪物時的響應速度
3. 整體遊戲性能表現

如果仍有性能問題，可能需要進一步優化其他計算密集的部分。 